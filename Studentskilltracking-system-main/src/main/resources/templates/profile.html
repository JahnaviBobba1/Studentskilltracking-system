<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{fragments/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>My Profile</title>
</head>
<body>
    <div th:fragment="content">
        <div class="profile-container">
            <h2 class="profile-heading" th:text="${user.username} + ''s Profile"></h2>

            <!-- Display subscribed event count -->
            <div class="subscription-counts">
                <p><strong>Total Events Subscribed:</strong> <span th:text="${eventCount}"></span></p>
                <p><strong>Total Courses Subscribed:</strong> <span th:text="${courseCount}"></span></p>
            </div>

            <div class="subscribed-section">
                <h3 class="subscribed-heading">Your Subscribed Events</h3>
                <div th:if="${not #lists.isEmpty(subscribedEvents)}">
                    <ul class="event-list">
                        <li th:each="event : ${subscribedEvents}" class="event-item">
                            <h4 class="event-title" th:text="${event.name}"></h4>
                            <p class="event-detail">Date: <span th:text="${#temporals.format(event.date, 'dd MMM yyyy')}"></span></p>
                            <p class="event-detail">Location: <span th:text="${event.location}"></span></p>
                            <div th:if="${event.imgUrl}" class="event-img-container">
                                <img th:src="${event.imgUrl}" th:alt="${event.name}" class="event-img">
                            </div>
                        </li>
                    </ul>
                </div>
                <div th:if="${#lists.isEmpty(subscribedEvents)}" class="no-subscription-message">
                    You have not subscribed to any events yet.
                </div>
            </div>

            <div class="subscribed-section">
                <h3 class="subscribed-heading">Your Subscribed Courses</h3>
                <div th:if="${not #lists.isEmpty(subscribedCourses)}">
                    <ul class="course-list">
                        <li th:each="course : ${subscribedCourses}" class="course-item">
                            <h4 class="course-title" th:text="${course.title}"></h4>
                            <a th:href="${course.courseUrl}" target="_blank" class="course-link">Course Link</a>
                        </li>
                    </ul>
                </div>
                <div th:if="${#lists.isEmpty(subscribedCourses)}" class="no-subscription-message">
                    You have not subscribed to any courses yet.
                </div>
            </div>
        </div>
    </div>
</body>
</html>